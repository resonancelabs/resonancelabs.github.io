!function(){const DEBUG=0;!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.cruntime=f()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){module.exports={name:"rl-cruntime-browser",version:"0.2.9",main:"cruntime_browser.js",devDependencies:{"http-server":"^0.7.5"}}},{}],2:[function(require,module,exports){!function(){var crouton_thrift={};"undefined"==typeof crouton_thrift&&(crouton_thrift={}),crouton_thrift.KeyValue=function(args){if(this.Key=null,this.Value=null,args){if(void 0===args.Key)throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN,"Required field Key is unset!");if(this.Key=args.Key,void 0===args.Value)throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN,"Required field Value is unset!");this.Value=args.Value}},crouton_thrift.KeyValue.prototype={},crouton_thrift.KeyValue.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.Key=input.readString().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.STRING?this.Value=input.readString().value:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.KeyValue.prototype.write=function(output){output.writeStructBegin("KeyValue"),null!==this.Key&&void 0!==this.Key&&(output.writeFieldBegin("Key",Thrift.Type.STRING,1),output.writeString(this.Key),output.writeFieldEnd()),null!==this.Value&&void 0!==this.Value&&(output.writeFieldBegin("Value",Thrift.Type.STRING,2),output.writeString(this.Value),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.Runtime=function(args){this.guid=null,this.start_micros=null,this.group_name=null,this.attrs=null,args&&(void 0!==args.guid&&(this.guid=args.guid),void 0!==args.start_micros&&(this.start_micros=args.start_micros),void 0!==args.group_name&&(this.group_name=args.group_name),void 0!==args.attrs&&(this.attrs=args.attrs))},crouton_thrift.Runtime.prototype={},crouton_thrift.Runtime.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.guid=input.readString().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.I64?this.start_micros=input.readI64().value:input.skip(ftype);break;case 3:ftype==Thrift.Type.STRING?this.group_name=input.readString().value:input.skip(ftype);break;case 4:if(ftype==Thrift.Type.LIST){var _rtmp34,_size0=0;this.attrs=[];var _etype3=0;_rtmp34=input.readListBegin(),_etype3=_rtmp34.etype,_size0=_rtmp34.size;for(var _i5=0;_size0>_i5;++_i5){var elem6=null;elem6=new crouton_thrift.KeyValue,elem6.read(input),this.attrs.push(elem6)}input.readListEnd()}else input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.Runtime.prototype.write=function(output){if(output.writeStructBegin("Runtime"),null!==this.guid&&void 0!==this.guid&&(output.writeFieldBegin("guid",Thrift.Type.STRING,1),output.writeString(this.guid),output.writeFieldEnd()),null!==this.start_micros&&void 0!==this.start_micros&&(output.writeFieldBegin("start_micros",Thrift.Type.I64,2),output.writeI64(this.start_micros),output.writeFieldEnd()),null!==this.group_name&&void 0!==this.group_name&&(output.writeFieldBegin("group_name",Thrift.Type.STRING,3),output.writeString(this.group_name),output.writeFieldEnd()),null!==this.attrs&&void 0!==this.attrs){output.writeFieldBegin("attrs",Thrift.Type.LIST,4),output.writeListBegin(Thrift.Type.STRUCT,this.attrs.length);for(var iter7 in this.attrs)this.attrs.hasOwnProperty(iter7)&&(iter7=this.attrs[iter7],iter7.write(output));output.writeListEnd(),output.writeFieldEnd()}output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.Distribution=function(args){this.count=null,this.sum=null,this.std_dev=null,this.bucket_counts=null,this.bucket_growth_factor=null,this.max_sample_value=null,args&&(void 0!==args.count&&(this.count=args.count),void 0!==args.sum&&(this.sum=args.sum),void 0!==args.std_dev&&(this.std_dev=args.std_dev),void 0!==args.bucket_counts&&(this.bucket_counts=args.bucket_counts),void 0!==args.bucket_growth_factor&&(this.bucket_growth_factor=args.bucket_growth_factor),void 0!==args.max_sample_value&&(this.max_sample_value=args.max_sample_value))},crouton_thrift.Distribution.prototype={},crouton_thrift.Distribution.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.I64?this.count=input.readI64().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.I64?this.sum=input.readI64().value:input.skip(ftype);break;case 3:ftype==Thrift.Type.DOUBLE?this.std_dev=input.readDouble().value:input.skip(ftype);break;case 4:if(ftype==Thrift.Type.LIST){var _rtmp312,_size8=0;this.bucket_counts=[];var _etype11=0;_rtmp312=input.readListBegin(),_etype11=_rtmp312.etype,_size8=_rtmp312.size;for(var _i13=0;_size8>_i13;++_i13){var elem14=null;elem14=input.readI64().value,this.bucket_counts.push(elem14)}input.readListEnd()}else input.skip(ftype);break;case 5:ftype==Thrift.Type.DOUBLE?this.bucket_growth_factor=input.readDouble().value:input.skip(ftype);break;case 6:ftype==Thrift.Type.DOUBLE?this.max_sample_value=input.readDouble().value:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.Distribution.prototype.write=function(output){if(output.writeStructBegin("Distribution"),null!==this.count&&void 0!==this.count&&(output.writeFieldBegin("count",Thrift.Type.I64,1),output.writeI64(this.count),output.writeFieldEnd()),null!==this.sum&&void 0!==this.sum&&(output.writeFieldBegin("sum",Thrift.Type.I64,2),output.writeI64(this.sum),output.writeFieldEnd()),null!==this.std_dev&&void 0!==this.std_dev&&(output.writeFieldBegin("std_dev",Thrift.Type.DOUBLE,3),output.writeDouble(this.std_dev),output.writeFieldEnd()),null!==this.bucket_counts&&void 0!==this.bucket_counts){output.writeFieldBegin("bucket_counts",Thrift.Type.LIST,4),output.writeListBegin(Thrift.Type.I64,this.bucket_counts.length);for(var iter15 in this.bucket_counts)this.bucket_counts.hasOwnProperty(iter15)&&(iter15=this.bucket_counts[iter15],output.writeI64(iter15));output.writeListEnd(),output.writeFieldEnd()}null!==this.bucket_growth_factor&&void 0!==this.bucket_growth_factor&&(output.writeFieldBegin("bucket_growth_factor",Thrift.Type.DOUBLE,5),output.writeDouble(this.bucket_growth_factor),output.writeFieldEnd()),null!==this.max_sample_value&&void 0!==this.max_sample_value&&(output.writeFieldBegin("max_sample_value",Thrift.Type.DOUBLE,6),output.writeDouble(this.max_sample_value),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.LogRecord=function(args){this.timestamp_micros=null,this.runtime_guid=null,this.span_guid=null,this.stable_name=null,this.message=null,this.level=null,this.thread_id=null,this.filename=null,this.line_number=null,this.stack_frames=null,this.payload_json=null,args&&(void 0!==args.timestamp_micros&&(this.timestamp_micros=args.timestamp_micros),void 0!==args.runtime_guid&&(this.runtime_guid=args.runtime_guid),void 0!==args.span_guid&&(this.span_guid=args.span_guid),void 0!==args.stable_name&&(this.stable_name=args.stable_name),void 0!==args.message&&(this.message=args.message),void 0!==args.level&&(this.level=args.level),void 0!==args.thread_id&&(this.thread_id=args.thread_id),void 0!==args.filename&&(this.filename=args.filename),void 0!==args.line_number&&(this.line_number=args.line_number),void 0!==args.stack_frames&&(this.stack_frames=args.stack_frames),void 0!==args.payload_json&&(this.payload_json=args.payload_json))},crouton_thrift.LogRecord.prototype={},crouton_thrift.LogRecord.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.I64?this.timestamp_micros=input.readI64().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.STRING?this.runtime_guid=input.readString().value:input.skip(ftype);break;case 3:ftype==Thrift.Type.STRING?this.span_guid=input.readString().value:input.skip(ftype);break;case 4:ftype==Thrift.Type.STRING?this.stable_name=input.readString().value:input.skip(ftype);break;case 5:ftype==Thrift.Type.STRING?this.message=input.readString().value:input.skip(ftype);break;case 6:ftype==Thrift.Type.STRING?this.level=input.readString().value:input.skip(ftype);break;case 7:ftype==Thrift.Type.I64?this.thread_id=input.readI64().value:input.skip(ftype);break;case 8:ftype==Thrift.Type.STRING?this.filename=input.readString().value:input.skip(ftype);break;case 9:ftype==Thrift.Type.I64?this.line_number=input.readI64().value:input.skip(ftype);break;case 10:if(ftype==Thrift.Type.LIST){var _rtmp320,_size16=0;this.stack_frames=[];var _etype19=0;_rtmp320=input.readListBegin(),_etype19=_rtmp320.etype,_size16=_rtmp320.size;for(var _i21=0;_size16>_i21;++_i21){var elem22=null;elem22=input.readString().value,this.stack_frames.push(elem22)}input.readListEnd()}else input.skip(ftype);break;case 11:ftype==Thrift.Type.STRING?this.payload_json=input.readString().value:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.LogRecord.prototype.write=function(output){if(output.writeStructBegin("LogRecord"),null!==this.timestamp_micros&&void 0!==this.timestamp_micros&&(output.writeFieldBegin("timestamp_micros",Thrift.Type.I64,1),output.writeI64(this.timestamp_micros),output.writeFieldEnd()),null!==this.runtime_guid&&void 0!==this.runtime_guid&&(output.writeFieldBegin("runtime_guid",Thrift.Type.STRING,2),output.writeString(this.runtime_guid),output.writeFieldEnd()),null!==this.span_guid&&void 0!==this.span_guid&&(output.writeFieldBegin("span_guid",Thrift.Type.STRING,3),output.writeString(this.span_guid),output.writeFieldEnd()),null!==this.stable_name&&void 0!==this.stable_name&&(output.writeFieldBegin("stable_name",Thrift.Type.STRING,4),output.writeString(this.stable_name),output.writeFieldEnd()),null!==this.message&&void 0!==this.message&&(output.writeFieldBegin("message",Thrift.Type.STRING,5),output.writeString(this.message),output.writeFieldEnd()),null!==this.level&&void 0!==this.level&&(output.writeFieldBegin("level",Thrift.Type.STRING,6),output.writeString(this.level),output.writeFieldEnd()),null!==this.thread_id&&void 0!==this.thread_id&&(output.writeFieldBegin("thread_id",Thrift.Type.I64,7),output.writeI64(this.thread_id),output.writeFieldEnd()),null!==this.filename&&void 0!==this.filename&&(output.writeFieldBegin("filename",Thrift.Type.STRING,8),output.writeString(this.filename),output.writeFieldEnd()),null!==this.line_number&&void 0!==this.line_number&&(output.writeFieldBegin("line_number",Thrift.Type.I64,9),output.writeI64(this.line_number),output.writeFieldEnd()),null!==this.stack_frames&&void 0!==this.stack_frames){output.writeFieldBegin("stack_frames",Thrift.Type.LIST,10),output.writeListBegin(Thrift.Type.STRING,this.stack_frames.length);for(var iter23 in this.stack_frames)this.stack_frames.hasOwnProperty(iter23)&&(iter23=this.stack_frames[iter23],output.writeString(iter23));output.writeListEnd(),output.writeFieldEnd()}null!==this.payload_json&&void 0!==this.payload_json&&(output.writeFieldBegin("payload_json",Thrift.Type.STRING,11),output.writeString(this.payload_json),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.TraceJoinId=function(args){if(this.TraceKey=null,this.Value=null,args){if(void 0===args.TraceKey)throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN,"Required field TraceKey is unset!");if(this.TraceKey=args.TraceKey,void 0===args.Value)throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN,"Required field Value is unset!");this.Value=args.Value}},crouton_thrift.TraceJoinId.prototype={},crouton_thrift.TraceJoinId.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.TraceKey=input.readString().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.STRING?this.Value=input.readString().value:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.TraceJoinId.prototype.write=function(output){output.writeStructBegin("TraceJoinId"),null!==this.TraceKey&&void 0!==this.TraceKey&&(output.writeFieldBegin("TraceKey",Thrift.Type.STRING,1),output.writeString(this.TraceKey),output.writeFieldEnd()),null!==this.Value&&void 0!==this.Value&&(output.writeFieldBegin("Value",Thrift.Type.STRING,2),output.writeString(this.Value),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.SpanRecord=function(args){this.span_guid=null,this.runtime_guid=null,this.span_name=null,this.join_ids=null,this.oldest_micros=null,this.youngest_micros=null,this.error_text=null,args&&(void 0!==args.span_guid&&(this.span_guid=args.span_guid),void 0!==args.runtime_guid&&(this.runtime_guid=args.runtime_guid),void 0!==args.span_name&&(this.span_name=args.span_name),void 0!==args.join_ids&&(this.join_ids=args.join_ids),void 0!==args.oldest_micros&&(this.oldest_micros=args.oldest_micros),void 0!==args.youngest_micros&&(this.youngest_micros=args.youngest_micros),void 0!==args.error_text&&(this.error_text=args.error_text))},crouton_thrift.SpanRecord.prototype={},crouton_thrift.SpanRecord.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.span_guid=input.readString().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.STRING?this.runtime_guid=input.readString().value:input.skip(ftype);break;case 3:ftype==Thrift.Type.STRING?this.span_name=input.readString().value:input.skip(ftype);break;case 4:if(ftype==Thrift.Type.LIST){var _rtmp328,_size24=0;this.join_ids=[];var _etype27=0;_rtmp328=input.readListBegin(),_etype27=_rtmp328.etype,_size24=_rtmp328.size;for(var _i29=0;_size24>_i29;++_i29){var elem30=null;elem30=new crouton_thrift.TraceJoinId,elem30.read(input),this.join_ids.push(elem30)}input.readListEnd()}else input.skip(ftype);break;case 5:ftype==Thrift.Type.I64?this.oldest_micros=input.readI64().value:input.skip(ftype);break;case 6:ftype==Thrift.Type.I64?this.youngest_micros=input.readI64().value:input.skip(ftype);break;case 7:ftype==Thrift.Type.STRING?this.error_text=input.readString().value:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.SpanRecord.prototype.write=function(output){if(output.writeStructBegin("SpanRecord"),null!==this.span_guid&&void 0!==this.span_guid&&(output.writeFieldBegin("span_guid",Thrift.Type.STRING,1),output.writeString(this.span_guid),output.writeFieldEnd()),null!==this.runtime_guid&&void 0!==this.runtime_guid&&(output.writeFieldBegin("runtime_guid",Thrift.Type.STRING,2),output.writeString(this.runtime_guid),output.writeFieldEnd()),null!==this.span_name&&void 0!==this.span_name&&(output.writeFieldBegin("span_name",Thrift.Type.STRING,3),output.writeString(this.span_name),output.writeFieldEnd()),null!==this.join_ids&&void 0!==this.join_ids){output.writeFieldBegin("join_ids",Thrift.Type.LIST,4),output.writeListBegin(Thrift.Type.STRUCT,this.join_ids.length);for(var iter31 in this.join_ids)this.join_ids.hasOwnProperty(iter31)&&(iter31=this.join_ids[iter31],iter31.write(output));output.writeListEnd(),output.writeFieldEnd()}null!==this.oldest_micros&&void 0!==this.oldest_micros&&(output.writeFieldBegin("oldest_micros",Thrift.Type.I64,5),output.writeI64(this.oldest_micros),output.writeFieldEnd()),null!==this.youngest_micros&&void 0!==this.youngest_micros&&(output.writeFieldBegin("youngest_micros",Thrift.Type.I64,6),output.writeI64(this.youngest_micros),output.writeFieldEnd()),null!==this.error_text&&void 0!==this.error_text&&(output.writeFieldBegin("error_text",Thrift.Type.STRING,7),output.writeString(this.error_text),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.SpanWindowSummary=function(args){this.span_name=null,this.delta_micros=null,this.delta_distribution=null,this.span_exemplars=null,args&&(void 0!==args.span_name&&(this.span_name=args.span_name),void 0!==args.delta_micros&&(this.delta_micros=args.delta_micros),void 0!==args.delta_distribution&&(this.delta_distribution=args.delta_distribution),void 0!==args.span_exemplars&&(this.span_exemplars=args.span_exemplars))},crouton_thrift.SpanWindowSummary.prototype={},crouton_thrift.SpanWindowSummary.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.span_name=input.readString().value:input.skip(ftype);break;case 2:ftype==Thrift.Type.I64?this.delta_micros=input.readI64().value:input.skip(ftype);break;case 3:ftype==Thrift.Type.STRUCT?(this.delta_distribution=new crouton_thrift.Distribution,this.delta_distribution.read(input)):input.skip(ftype);break;case 4:if(ftype==Thrift.Type.LIST){var _rtmp336,_size32=0;this.span_exemplars=[];var _etype35=0;_rtmp336=input.readListBegin(),_etype35=_rtmp336.etype,_size32=_rtmp336.size;for(var _i37=0;_size32>_i37;++_i37){var elem38=null;elem38=new crouton_thrift.SpanRecord,elem38.read(input),this.span_exemplars.push(elem38)}input.readListEnd()}else input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.SpanWindowSummary.prototype.write=function(output){if(output.writeStructBegin("SpanWindowSummary"),null!==this.span_name&&void 0!==this.span_name&&(output.writeFieldBegin("span_name",Thrift.Type.STRING,1),output.writeString(this.span_name),output.writeFieldEnd()),null!==this.delta_micros&&void 0!==this.delta_micros&&(output.writeFieldBegin("delta_micros",Thrift.Type.I64,2),output.writeI64(this.delta_micros),output.writeFieldEnd()),null!==this.delta_distribution&&void 0!==this.delta_distribution&&(output.writeFieldBegin("delta_distribution",Thrift.Type.STRUCT,3),this.delta_distribution.write(output),output.writeFieldEnd()),null!==this.span_exemplars&&void 0!==this.span_exemplars){output.writeFieldBegin("span_exemplars",Thrift.Type.LIST,4),output.writeListBegin(Thrift.Type.STRUCT,this.span_exemplars.length);for(var iter39 in this.span_exemplars)this.span_exemplars.hasOwnProperty(iter39)&&(iter39=this.span_exemplars[iter39],iter39.write(output));output.writeListEnd(),output.writeFieldEnd()}output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.EchoRequest=function(args){this.message=null,args&&void 0!==args.message&&(this.message=args.message)},crouton_thrift.EchoRequest.prototype={},crouton_thrift.EchoRequest.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.message=input.readString().value:input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.EchoRequest.prototype.write=function(output){output.writeStructBegin("EchoRequest"),null!==this.message&&void 0!==this.message&&(output.writeFieldBegin("message",Thrift.Type.STRING,1),output.writeString(this.message),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.EchoResponse=function(args){this.message=null,args&&void 0!==args.message&&(this.message=args.message)},crouton_thrift.EchoResponse.prototype={},crouton_thrift.EchoResponse.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 2:ftype==Thrift.Type.STRING?this.message=input.readString().value:input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.EchoResponse.prototype.write=function(output){output.writeStructBegin("EchoResponse"),null!==this.message&&void 0!==this.message&&(output.writeFieldBegin("message",Thrift.Type.STRING,2),output.writeString(this.message),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.RuntimeReportRequest=function(args){this.runtime=null,this.timestamp_micros=null,this.span_window_summaries=null,this.span_records=null,this.log_records=null,args&&(void 0!==args.runtime&&(this.runtime=args.runtime),void 0!==args.timestamp_micros&&(this.timestamp_micros=args.timestamp_micros),void 0!==args.span_window_summaries&&(this.span_window_summaries=args.span_window_summaries),void 0!==args.span_records&&(this.span_records=args.span_records),void 0!==args.log_records&&(this.log_records=args.log_records))},crouton_thrift.RuntimeReportRequest.prototype={},crouton_thrift.RuntimeReportRequest.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRUCT?(this.runtime=new crouton_thrift.Runtime,this.runtime.read(input)):input.skip(ftype);break;case 2:ftype==Thrift.Type.I64?this.timestamp_micros=input.readI64().value:input.skip(ftype);break;case 3:if(ftype==Thrift.Type.LIST){var _rtmp344,_size40=0;this.span_window_summaries=[];var _etype43=0;_rtmp344=input.readListBegin(),_etype43=_rtmp344.etype,_size40=_rtmp344.size;for(var _i45=0;_size40>_i45;++_i45){var elem46=null;elem46=new crouton_thrift.SpanWindowSummary,elem46.read(input),this.span_window_summaries.push(elem46)}input.readListEnd()}else input.skip(ftype);break;case 4:if(ftype==Thrift.Type.LIST){var _rtmp351,_size47=0;this.span_records=[];var _etype50=0;_rtmp351=input.readListBegin(),_etype50=_rtmp351.etype,_size47=_rtmp351.size;for(var _i52=0;_size47>_i52;++_i52){var elem53=null;elem53=new crouton_thrift.SpanRecord,elem53.read(input),this.span_records.push(elem53)}input.readListEnd()}else input.skip(ftype);break;case 5:if(ftype==Thrift.Type.LIST){var _rtmp358,_size54=0;this.log_records=[];var _etype57=0;_rtmp358=input.readListBegin(),_etype57=_rtmp358.etype,_size54=_rtmp358.size;for(var _i59=0;_size54>_i59;++_i59){var elem60=null;elem60=new crouton_thrift.LogRecord,elem60.read(input),this.log_records.push(elem60)}input.readListEnd()}else input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.RuntimeReportRequest.prototype.write=function(output){if(output.writeStructBegin("RuntimeReportRequest"),null!==this.runtime&&void 0!==this.runtime&&(output.writeFieldBegin("runtime",Thrift.Type.STRUCT,1),this.runtime.write(output),output.writeFieldEnd()),null!==this.timestamp_micros&&void 0!==this.timestamp_micros&&(output.writeFieldBegin("timestamp_micros",Thrift.Type.I64,2),output.writeI64(this.timestamp_micros),output.writeFieldEnd()),null!==this.span_window_summaries&&void 0!==this.span_window_summaries){output.writeFieldBegin("span_window_summaries",Thrift.Type.LIST,3),output.writeListBegin(Thrift.Type.STRUCT,this.span_window_summaries.length);for(var iter61 in this.span_window_summaries)this.span_window_summaries.hasOwnProperty(iter61)&&(iter61=this.span_window_summaries[iter61],iter61.write(output));output.writeListEnd(),output.writeFieldEnd()}if(null!==this.span_records&&void 0!==this.span_records){output.writeFieldBegin("span_records",Thrift.Type.LIST,4),output.writeListBegin(Thrift.Type.STRUCT,this.span_records.length);for(var iter62 in this.span_records)this.span_records.hasOwnProperty(iter62)&&(iter62=this.span_records[iter62],iter62.write(output));output.writeListEnd(),output.writeFieldEnd()}if(null!==this.log_records&&void 0!==this.log_records){output.writeFieldBegin("log_records",Thrift.Type.LIST,5),output.writeListBegin(Thrift.Type.STRUCT,this.log_records.length);for(var iter63 in this.log_records)this.log_records.hasOwnProperty(iter63)&&(iter63=this.log_records[iter63],iter63.write(output));output.writeListEnd(),output.writeFieldEnd()}output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.RuntimeReportResponse=function(args){this.kill_cruntime=null,args&&void 0!==args.kill_cruntime&&(this.kill_cruntime=args.kill_cruntime)},crouton_thrift.RuntimeReportResponse.prototype={},crouton_thrift.RuntimeReportResponse.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.BOOL?this.kill_cruntime=input.readBool().value:input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.RuntimeReportResponse.prototype.write=function(output){output.writeStructBegin("RuntimeReportResponse"),null!==this.kill_cruntime&&void 0!==this.kill_cruntime&&(output.writeFieldBegin("kill_cruntime",Thrift.Type.BOOL,1),output.writeBool(this.kill_cruntime),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.ProxyReportRequest=function(args){this.runtime=null,this.span_records=null,this.log_records=null,args&&(void 0!==args.runtime&&(this.runtime=args.runtime),void 0!==args.span_records&&(this.span_records=args.span_records),void 0!==args.log_records&&(this.log_records=args.log_records))},crouton_thrift.ProxyReportRequest.prototype={},crouton_thrift.ProxyReportRequest.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRUCT?(this.runtime=new crouton_thrift.Runtime,this.runtime.read(input)):input.skip(ftype);break;case 2:if(ftype==Thrift.Type.LIST){var _rtmp368,_size64=0;this.span_records=[];var _etype67=0;_rtmp368=input.readListBegin(),_etype67=_rtmp368.etype,_size64=_rtmp368.size;for(var _i69=0;_size64>_i69;++_i69){var elem70=null;elem70=new crouton_thrift.SpanRecord,elem70.read(input),this.span_records.push(elem70)}input.readListEnd()}else input.skip(ftype);break;case 3:if(ftype==Thrift.Type.LIST){var _rtmp375,_size71=0;this.log_records=[];var _etype74=0;_rtmp375=input.readListBegin(),_etype74=_rtmp375.etype,_size71=_rtmp375.size;for(var _i76=0;_size71>_i76;++_i76){var elem77=null;elem77=new crouton_thrift.LogRecord,elem77.read(input),this.log_records.push(elem77)}input.readListEnd()}else input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.ProxyReportRequest.prototype.write=function(output){if(output.writeStructBegin("ProxyReportRequest"),null!==this.runtime&&void 0!==this.runtime&&(output.writeFieldBegin("runtime",Thrift.Type.STRUCT,1),this.runtime.write(output),output.writeFieldEnd()),null!==this.span_records&&void 0!==this.span_records){output.writeFieldBegin("span_records",Thrift.Type.LIST,2),output.writeListBegin(Thrift.Type.STRUCT,this.span_records.length);for(var iter78 in this.span_records)this.span_records.hasOwnProperty(iter78)&&(iter78=this.span_records[iter78],iter78.write(output));output.writeListEnd(),output.writeFieldEnd()}if(null!==this.log_records&&void 0!==this.log_records){output.writeFieldBegin("log_records",Thrift.Type.LIST,3),output.writeListBegin(Thrift.Type.STRUCT,this.log_records.length);for(var iter79 in this.log_records)this.log_records.hasOwnProperty(iter79)&&(iter79=this.log_records[iter79],iter79.write(output));output.writeListEnd(),output.writeFieldEnd()}output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.ProxyReportResponse=function(args){this.kill_cruntime=null,args&&void 0!==args.kill_cruntime&&(this.kill_cruntime=args.kill_cruntime)},crouton_thrift.ProxyReportResponse.prototype={},crouton_thrift.ProxyReportResponse.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.BOOL?this.kill_cruntime=input.readBool().value:input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.ProxyReportResponse.prototype.write=function(output){output.writeStructBegin("ProxyReportResponse"),null!==this.kill_cruntime&&void 0!==this.kill_cruntime&&(output.writeFieldBegin("kill_cruntime",Thrift.Type.BOOL,1),output.writeBool(this.kill_cruntime),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.Auth=function(args){this.access_token=null,args&&void 0!==args.access_token&&(this.access_token=args.access_token)},crouton_thrift.Auth.prototype={},crouton_thrift.Auth.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRING?this.access_token=input.readString().value:input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.Auth.prototype.write=function(output){output.writeStructBegin("Auth"),null!==this.access_token&&void 0!==this.access_token&&(output.writeFieldBegin("access_token",Thrift.Type.STRING,1),output.writeString(this.access_token),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.ServiceReportRequest=function(args){this.auth=null,this.runtime_report=null,this.proxy_report=null,args&&(void 0!==args.auth&&(this.auth=args.auth),void 0!==args.runtime_report&&(this.runtime_report=args.runtime_report),void 0!==args.proxy_report&&(this.proxy_report=args.proxy_report))},crouton_thrift.ServiceReportRequest.prototype={},crouton_thrift.ServiceReportRequest.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRUCT?(this.auth=new crouton_thrift.Auth,this.auth.read(input)):input.skip(ftype);break;case 2:ftype==Thrift.Type.STRUCT?(this.runtime_report=new crouton_thrift.RuntimeReportRequest,this.runtime_report.read(input)):input.skip(ftype);break;case 3:ftype==Thrift.Type.STRUCT?(this.proxy_report=new crouton_thrift.ProxyReportRequest,this.proxy_report.read(input)):input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.ServiceReportRequest.prototype.write=function(output){output.writeStructBegin("ServiceReportRequest"),null!==this.auth&&void 0!==this.auth&&(output.writeFieldBegin("auth",Thrift.Type.STRUCT,1),this.auth.write(output),output.writeFieldEnd()),null!==this.runtime_report&&void 0!==this.runtime_report&&(output.writeFieldBegin("runtime_report",Thrift.Type.STRUCT,2),this.runtime_report.write(output),output.writeFieldEnd()),null!==this.proxy_report&&void 0!==this.proxy_report&&(output.writeFieldBegin("proxy_report",Thrift.Type.STRUCT,3),this.proxy_report.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()
},crouton_thrift.CroutonService_Echo_args=function(args){this.request=null,args&&void 0!==args.request&&(this.request=args.request)},crouton_thrift.CroutonService_Echo_args.prototype={},crouton_thrift.CroutonService_Echo_args.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 1:ftype==Thrift.Type.STRUCT?(this.request=new crouton_thrift.EchoRequest,this.request.read(input)):input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_Echo_args.prototype.write=function(output){output.writeStructBegin("CroutonService_Echo_args"),null!==this.request&&void 0!==this.request&&(output.writeFieldBegin("request",Thrift.Type.STRUCT,1),this.request.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonService_Echo_result=function(args){this.success=null,args&&void 0!==args.success&&(this.success=args.success)},crouton_thrift.CroutonService_Echo_result.prototype={},crouton_thrift.CroutonService_Echo_result.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 0:ftype==Thrift.Type.STRUCT?(this.success=new crouton_thrift.EchoResponse,this.success.read(input)):input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_Echo_result.prototype.write=function(output){output.writeStructBegin("CroutonService_Echo_result"),null!==this.success&&void 0!==this.success&&(output.writeFieldBegin("success",Thrift.Type.STRUCT,0),this.success.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonService_RuntimeReport_args=function(args){this.auth=null,this.request=null,args&&(void 0!==args.auth&&(this.auth=args.auth),void 0!==args.request&&(this.request=args.request))},crouton_thrift.CroutonService_RuntimeReport_args.prototype={},crouton_thrift.CroutonService_RuntimeReport_args.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 2:ftype==Thrift.Type.STRUCT?(this.auth=new crouton_thrift.Auth,this.auth.read(input)):input.skip(ftype);break;case 1:ftype==Thrift.Type.STRUCT?(this.request=new crouton_thrift.RuntimeReportRequest,this.request.read(input)):input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_RuntimeReport_args.prototype.write=function(output){output.writeStructBegin("CroutonService_RuntimeReport_args"),null!==this.auth&&void 0!==this.auth&&(output.writeFieldBegin("auth",Thrift.Type.STRUCT,2),this.auth.write(output),output.writeFieldEnd()),null!==this.request&&void 0!==this.request&&(output.writeFieldBegin("request",Thrift.Type.STRUCT,1),this.request.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonService_RuntimeReport_result=function(args){this.success=null,args&&void 0!==args.success&&(this.success=args.success)},crouton_thrift.CroutonService_RuntimeReport_result.prototype={},crouton_thrift.CroutonService_RuntimeReport_result.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 0:ftype==Thrift.Type.STRUCT?(this.success=new crouton_thrift.RuntimeReportResponse,this.success.read(input)):input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_RuntimeReport_result.prototype.write=function(output){output.writeStructBegin("CroutonService_RuntimeReport_result"),null!==this.success&&void 0!==this.success&&(output.writeFieldBegin("success",Thrift.Type.STRUCT,0),this.success.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonService_ProxyReport_args=function(args){this.auth=null,this.request=null,args&&(void 0!==args.auth&&(this.auth=args.auth),void 0!==args.request&&(this.request=args.request))},crouton_thrift.CroutonService_ProxyReport_args.prototype={},crouton_thrift.CroutonService_ProxyReport_args.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 2:ftype==Thrift.Type.STRUCT?(this.auth=new crouton_thrift.Auth,this.auth.read(input)):input.skip(ftype);break;case 1:ftype==Thrift.Type.STRUCT?(this.request=new crouton_thrift.ProxyReportRequest,this.request.read(input)):input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_ProxyReport_args.prototype.write=function(output){output.writeStructBegin("CroutonService_ProxyReport_args"),null!==this.auth&&void 0!==this.auth&&(output.writeFieldBegin("auth",Thrift.Type.STRUCT,2),this.auth.write(output),output.writeFieldEnd()),null!==this.request&&void 0!==this.request&&(output.writeFieldBegin("request",Thrift.Type.STRUCT,1),this.request.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonService_ProxyReport_result=function(args){this.success=null,args&&void 0!==args.success&&(this.success=args.success)},crouton_thrift.CroutonService_ProxyReport_result.prototype={},crouton_thrift.CroutonService_ProxyReport_result.prototype.read=function(input){for(input.readStructBegin();;){var ret=input.readFieldBegin(),ftype=(ret.fname,ret.ftype),fid=ret.fid;if(ftype==Thrift.Type.STOP)break;switch(fid){case 0:ftype==Thrift.Type.STRUCT?(this.success=new crouton_thrift.ProxyReportResponse,this.success.read(input)):input.skip(ftype);break;case 0:input.skip(ftype);break;default:input.skip(ftype)}input.readFieldEnd()}input.readStructEnd()},crouton_thrift.CroutonService_ProxyReport_result.prototype.write=function(output){output.writeStructBegin("CroutonService_ProxyReport_result"),null!==this.success&&void 0!==this.success&&(output.writeFieldBegin("success",Thrift.Type.STRUCT,0),this.success.write(output),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},crouton_thrift.CroutonServiceClient=function(input,output){this.input=input,this.output=output?output:input,this.seqid=0},crouton_thrift.CroutonServiceClient.prototype={},crouton_thrift.CroutonServiceClient.prototype.Echo=function(request,callback){return this.send_Echo(request,callback),callback?void 0:this.recv_Echo()},crouton_thrift.CroutonServiceClient.prototype.send_Echo=function(request,callback){this.output.writeMessageBegin("Echo",Thrift.MessageType.CALL,this.seqid);var args=new crouton_thrift.CroutonService_Echo_args;if(args.request=request,args.write(this.output),this.output.writeMessageEnd(),!callback)return this.output.getTransport().flush();var self=this;this.output.getTransport().flush(!0,function(){var result=null;try{result=self.recv_Echo()}catch(e){result=e}callback(result)})},crouton_thrift.CroutonServiceClient.prototype.recv_Echo=function(){{var ret=this.input.readMessageBegin(),mtype=(ret.fname,ret.mtype);ret.rseqid}if(mtype==Thrift.MessageType.EXCEPTION){var x=new Thrift.TApplicationException;throw x.read(this.input),this.input.readMessageEnd(),x}var result=new crouton_thrift.CroutonService_Echo_result;if(result.read(this.input),this.input.readMessageEnd(),null!==result.success)return result.success;throw"Echo failed: unknown result"},crouton_thrift.CroutonServiceClient.prototype.RuntimeReport=function(auth,request,callback){return this.send_RuntimeReport(auth,request,callback),callback?void 0:this.recv_RuntimeReport()},crouton_thrift.CroutonServiceClient.prototype.send_RuntimeReport=function(auth,request,callback){this.output.writeMessageBegin("RuntimeReport",Thrift.MessageType.CALL,this.seqid);var args=new crouton_thrift.CroutonService_RuntimeReport_args;if(args.auth=auth,args.request=request,args.write(this.output),this.output.writeMessageEnd(),!callback)return this.output.getTransport().flush();var self=this;this.output.getTransport().flush(!0,function(){var result=null;try{result=self.recv_RuntimeReport()}catch(e){result=e}callback(result)})},crouton_thrift.CroutonServiceClient.prototype.recv_RuntimeReport=function(){{var ret=this.input.readMessageBegin(),mtype=(ret.fname,ret.mtype);ret.rseqid}if(mtype==Thrift.MessageType.EXCEPTION){var x=new Thrift.TApplicationException;throw x.read(this.input),this.input.readMessageEnd(),x}var result=new crouton_thrift.CroutonService_RuntimeReport_result;if(result.read(this.input),this.input.readMessageEnd(),null!==result.success)return result.success;throw"RuntimeReport failed: unknown result"},crouton_thrift.CroutonServiceClient.prototype.ProxyReport=function(auth,request,callback){return this.send_ProxyReport(auth,request,callback),callback?void 0:this.recv_ProxyReport()},crouton_thrift.CroutonServiceClient.prototype.send_ProxyReport=function(auth,request,callback){this.output.writeMessageBegin("ProxyReport",Thrift.MessageType.CALL,this.seqid);var args=new crouton_thrift.CroutonService_ProxyReport_args;if(args.auth=auth,args.request=request,args.write(this.output),this.output.writeMessageEnd(),!callback)return this.output.getTransport().flush();var self=this;this.output.getTransport().flush(!0,function(){var result=null;try{result=self.recv_ProxyReport()}catch(e){result=e}callback(result)})},crouton_thrift.CroutonServiceClient.prototype.recv_ProxyReport=function(){{var ret=this.input.readMessageBegin(),mtype=(ret.fname,ret.mtype);ret.rseqid}if(mtype==Thrift.MessageType.EXCEPTION){var x=new Thrift.TApplicationException;throw x.read(this.input),this.input.readMessageEnd(),x}var result=new crouton_thrift.CroutonService_ProxyReport_result;if(result.read(this.input),this.input.readMessageEnd(),null!==result.success)return result.success;throw"ProxyReport failed: unknown result"};var Thrift={Version:"1.0.0-dev",Type:{STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17},MessageType:{CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},objectLength:function(obj){var length=0;for(var k in obj)obj.hasOwnProperty(k)&&length++;return length},inherits:function(constructor,superConstructor,name){function F(){}F.prototype=superConstructor.prototype,constructor.prototype=new F,constructor.prototype.name=name||""}};Thrift.TException=function(message){this.message=message},Thrift.inherits(Thrift.TException,Error,"TException"),Thrift.TException.prototype.getMessage=function(){return this.message},Thrift.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10},Thrift.TApplicationException=function(message,code){this.message=message,this.code="number"==typeof code?code:0},Thrift.inherits(Thrift.TApplicationException,Thrift.TException,"TApplicationException"),Thrift.TApplicationException.prototype.read=function(input){for(;;){var ret=input.readFieldBegin();if(ret.ftype==Thrift.Type.STOP)break;var fid=ret.fid;switch(fid){case 1:ret.ftype==Thrift.Type.STRING?(ret=input.readString(),this.message=ret.value):ret=input.skip(ret.ftype);break;case 2:ret.ftype==Thrift.Type.I32?(ret=input.readI32(),this.code=ret.value):ret=input.skip(ret.ftype);break;default:ret=input.skip(ret.ftype)}input.readFieldEnd()}input.readStructEnd()},Thrift.TApplicationException.prototype.write=function(output){output.writeStructBegin("TApplicationException"),this.message&&(output.writeFieldBegin("message",Thrift.Type.STRING,1),output.writeString(this.getMessage()),output.writeFieldEnd()),this.code&&(output.writeFieldBegin("type",Thrift.Type.I32,2),output.writeI32(this.code),output.writeFieldEnd()),output.writeFieldStop(),output.writeStructEnd()},Thrift.TApplicationException.prototype.getCode=function(){return this.code},Thrift.Transport=Thrift.TXHRTransport=function(url,options){this.url=url,this.wpos=0,this.rpos=0,this.useCORS=options&&options.useCORS,this.send_buf="",this.recv_buf=""},Thrift.TXHRTransport.prototype={getXmlHttpRequestObject:function(){try{return new XMLHttpRequest}catch(e1){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e2){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e3){}throw"Your browser doesn't support XHR."},flush:function(async,callback){var self=this;if(async&&!callback||void 0===this.url||""===this.url)return this.send_buf;var xreq=this.getXmlHttpRequestObject();if(xreq.overrideMimeType&&xreq.overrideMimeType("application/json"),callback&&(xreq.onreadystatechange=function(){var clientCallback=callback;return function(){4==this.readyState&&200==this.status&&(self.setRecvBuffer(this.responseText),clientCallback())}}()),xreq.open("POST",this.url,!!async),xreq.send(this.send_buf),!async||!callback){if(4!=xreq.readyState)throw"encountered an unknown ajax ready state: "+xreq.readyState;if(200!=xreq.status)throw"encountered a unknown request status: "+xreq.status;this.recv_buf=xreq.responseText,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0}},jqRequest:function(client,postData,args,recv_method){if("undefined"==typeof jQuery||"undefined"==typeof jQuery.Deferred)throw"Thrift.js requires jQuery 1.5+ to use asynchronous requests";var thriftTransport=this,jqXHR=jQuery.ajax({url:this.url,data:postData,type:"POST",cache:!1,contentType:"application/json",dataType:"text thrift",converters:{"text thrift":function(responseData){thriftTransport.setRecvBuffer(responseData);var value=recv_method.call(client);return value}},context:client,success:jQuery.makeArray(args).pop()});return jqXHR},setRecvBuffer:function(buf){this.recv_buf=buf,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},isOpen:function(){return!0},open:function(){},close:function(){},read:function(len){var avail=this.wpos-this.rpos;if(0===avail)return"";var give=len;len>avail&&(give=avail);var ret=this.read_buf.substr(this.rpos,give);return this.rpos+=give,ret},readAll:function(){return this.recv_buf},write:function(buf){this.send_buf=buf},getSendBuffer:function(){return this.send_buf}},Thrift.TWebSocketTransport=function(url){this.__reset(url)},Thrift.TWebSocketTransport.prototype={__reset:function(url){this.url=url,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},flush:function(async,callback){var self=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var clientCallback=callback;return function(msg){self.setRecvBuffer(msg),clientCallback()}}())):this.send_pending.push({buf:this.send_buf,cb:callback})},__onOpen:function(){var self=this;this.send_pending.length>0&&(this.send_pending.forEach(function(elem){this.socket.send(elem.buf),this.callbacks.push(function(){var clientCallback=elem.cb;return function(msg){self.setRecvBuffer(msg),clientCallback()}}())}),this.send_pending=[])},__onClose:function(){this.__reset(this.url)},__onMessage:function(evt){this.callbacks.length&&this.callbacks.shift()(evt.data)},__onError:function(evt){this.socket.close()},setRecvBuffer:function(buf){this.recv_buf=buf,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},isOpen:function(){return this.socket&&this.socket.readyState==this.socket.OPEN},open:function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},close:function(){this.socket.close()},read:function(len){var avail=this.wpos-this.rpos;if(0===avail)return"";var give=len;len>avail&&(give=avail);var ret=this.read_buf.substr(this.rpos,give);return this.rpos+=give,ret},readAll:function(){return this.recv_buf},write:function(buf){this.send_buf=buf},getSendBuffer:function(){return this.send_buf}},Thrift.TJSONProtocol=Thrift.Protocol=function(transport){this.tstack=[],this.tpos=[],this.transport=transport},Thrift.Protocol.Type={},Thrift.Protocol.Type[Thrift.Type.BOOL]='"tf"',Thrift.Protocol.Type[Thrift.Type.BYTE]='"i8"',Thrift.Protocol.Type[Thrift.Type.I16]='"i16"',Thrift.Protocol.Type[Thrift.Type.I32]='"i32"',Thrift.Protocol.Type[Thrift.Type.I64]='"i64"',Thrift.Protocol.Type[Thrift.Type.DOUBLE]='"dbl"',Thrift.Protocol.Type[Thrift.Type.STRUCT]='"rec"',Thrift.Protocol.Type[Thrift.Type.STRING]='"str"',Thrift.Protocol.Type[Thrift.Type.MAP]='"map"',Thrift.Protocol.Type[Thrift.Type.LIST]='"lst"',Thrift.Protocol.Type[Thrift.Type.SET]='"set"',Thrift.Protocol.RType={},Thrift.Protocol.RType.tf=Thrift.Type.BOOL,Thrift.Protocol.RType.i8=Thrift.Type.BYTE,Thrift.Protocol.RType.i16=Thrift.Type.I16,Thrift.Protocol.RType.i32=Thrift.Type.I32,Thrift.Protocol.RType.i64=Thrift.Type.I64,Thrift.Protocol.RType.dbl=Thrift.Type.DOUBLE,Thrift.Protocol.RType.rec=Thrift.Type.STRUCT,Thrift.Protocol.RType.str=Thrift.Type.STRING,Thrift.Protocol.RType.map=Thrift.Type.MAP,Thrift.Protocol.RType.lst=Thrift.Type.LIST,Thrift.Protocol.RType.set=Thrift.Type.SET,Thrift.Protocol.Version=1,Thrift.Protocol.prototype={getTransport:function(){return this.transport},writeMessageBegin:function(name,messageType,seqid){this.tstack=[],this.tpos=[],this.tstack.push([Thrift.Protocol.Version,'"'+name+'"',messageType,seqid])},writeMessageEnd:function(){var obj=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(obj),this.wbuf="["+this.wobj.join(",")+"]",this.transport.write(this.wbuf)},writeStructBegin:function(){this.tpos.push(this.tstack.length),this.tstack.push({})},writeStructEnd:function(){var p=this.tpos.pop(),struct=this.tstack[p],str="{",first=!0;for(var key in struct)first?first=!1:str+=",",str+=key+":"+struct[key];str+="}",this.tstack[p]=str},writeFieldBegin:function(name,fieldType,fieldId){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+fieldId+'"',fieldType:Thrift.Protocol.Type[fieldType]})},writeFieldEnd:function(){var value=this.tstack.pop(),fieldInfo=this.tstack.pop();this.tstack[this.tstack.length-1][fieldInfo.fieldId]="{"+fieldInfo.fieldType+":"+value+"}",this.tpos.pop()},writeFieldStop:function(){},writeMapBegin:function(keyType,valType){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[keyType],Thrift.Protocol.Type[valType],0])},writeMapEnd:function(){var p=this.tpos.pop();if(p!=this.tstack.length){(this.tstack.length-p-1)%2!==0&&this.tstack.push("");var size=(this.tstack.length-p-1)/2;this.tstack[p][this.tstack[p].length-1]=size;for(var map="}",first=!0;this.tstack.length>p+1;){var v=this.tstack.pop(),k=this.tstack.pop();first?first=!1:map=","+map,isNaN(k)||(k='"'+k+'"'),map=k+":"+v+map}map="{"+map,this.tstack[p].push(map),this.tstack[p]="["+this.tstack[p].join(",")+"]"}},writeListBegin:function(elemType,size){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[elemType],size])},writeListEnd:function(){for(var p=this.tpos.pop();this.tstack.length>p+1;){var tmpVal=this.tstack[p+1];this.tstack.splice(p+1,1),this.tstack[p].push(tmpVal)}this.tstack[p]="["+this.tstack[p].join(",")+"]"},writeSetBegin:function(elemType,size){this.tpos.push(this.tstack.length),this.tstack.push([Thrift.Protocol.Type[elemType],size])},writeSetEnd:function(){for(var p=this.tpos.pop();this.tstack.length>p+1;){var tmpVal=this.tstack[p+1];this.tstack.splice(p+1,1),this.tstack[p].push(tmpVal)}this.tstack[p]="["+this.tstack[p].join(",")+"]"},writeBool:function(value){this.tstack.push(value?1:0)},writeByte:function(i8){this.tstack.push(i8)},writeI16:function(i16){this.tstack.push(i16)},writeI32:function(i32){this.tstack.push(i32)},writeI64:function(i64){this.tstack.push(i64)},writeDouble:function(dbl){this.tstack.push(dbl)},writeString:function(str){if(null===str)this.tstack.push(null);else{for(var escapedString="",i=0;i<str.length;i++){var ch=str.charAt(i);escapedString+='"'===ch?'\\"':"\\"===ch?"\\\\":"\b"===ch?"\\b":"\f"===ch?"\\f":"\n"===ch?"\\n":"\r"===ch?"\\r":"	"===ch?"\\t":ch}this.tstack.push('"'+escapedString+'"')}},writeBinary:function(str){this.writeString(str)},readMessageBegin:function(){this.rstack=[],this.rpos=[],this.robj="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse(this.transport.readAll()):"undefined"!=typeof jQuery?jQuery.parseJSON(this.transport.readAll()):eval(this.transport.readAll());var r={},version=this.robj.shift();if(version!=Thrift.Protocol.Version)throw"Wrong thrift protocol version: "+version;return r.fname=this.robj.shift(),r.mtype=this.robj.shift(),r.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),r},readMessageEnd:function(){},readStructBegin:function(){var r={};return r.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),r},readStructEnd:function(){this.rstack[this.rstack.length-2]instanceof Array&&this.rstack.pop()},readFieldBegin:function(){var r={},fid=-1,ftype=Thrift.Type.STOP;for(var f in this.rstack[this.rstack.length-1])if(null!==f){fid=parseInt(f,10),this.rpos.push(this.rstack.length);var field=this.rstack[this.rstack.length-1][fid];delete this.rstack[this.rstack.length-1][fid],this.rstack.push(field);break}if(-1!=fid)for(var i in this.rstack[this.rstack.length-1])null!==Thrift.Protocol.RType[i]&&(ftype=Thrift.Protocol.RType[i],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][i]);return r.fname="",r.ftype=ftype,r.fid=fid,r},readFieldEnd:function(){for(var pos=this.rpos.pop();this.rstack.length>pos;)this.rstack.pop()},readMapBegin:function(){var map=this.rstack.pop(),first=map.shift();first instanceof Array&&(this.rstack.push(map),map=first,first=map.shift());var r={};return r.ktype=Thrift.Protocol.RType[first],r.vtype=Thrift.Protocol.RType[map.shift()],r.size=map.shift(),this.rpos.push(this.rstack.length),this.rstack.push(map.shift()),r},readMapEnd:function(){this.readFieldEnd()},readListBegin:function(){var list=this.rstack[this.rstack.length-1],r={};return r.etype=Thrift.Protocol.RType[list.shift()],r.size=list.shift(),this.rpos.push(this.rstack.length),this.rstack.push(list),r},readListEnd:function(){this.readFieldEnd()},readSetBegin:function(elemType,size){return this.readListBegin(elemType,size)},readSetEnd:function(){return this.readListEnd()},readBool:function(){var r=this.readI32();return r.value=null!==r&&"1"==r.value?!0:!1,r},readByte:function(){return this.readI32()},readI16:function(){return this.readI32()},readI32:function(f){void 0===f&&(f=this.rstack[this.rstack.length-1]);var r={};if(f instanceof Array)r.value=0===f.length?void 0:f.shift();else if(f instanceof Object){for(var i in f)if(null!==i){this.rstack.push(f[i]),delete f[i],r.value=i;break}}else r.value=f,this.rstack.pop();return r},readI64:function(){return this.readI32()},readDouble:function(){return this.readI32()},readString:function(){var r=this.readI32();return r},readBinary:function(){return this.readString()},skip:function(type){var ret,i;switch(type){case Thrift.Type.STOP:return null;case Thrift.Type.BOOL:return this.readBool();case Thrift.Type.BYTE:return this.readByte();case Thrift.Type.I16:return this.readI16();case Thrift.Type.I32:return this.readI32();case Thrift.Type.I64:return this.readI64();case Thrift.Type.DOUBLE:return this.readDouble();case Thrift.Type.STRING:return this.readString();case Thrift.Type.STRUCT:for(this.readStructBegin();;){if(ret=this.readFieldBegin(),ret.ftype==Thrift.Type.STOP)break;this.skip(ret.ftype),this.readFieldEnd()}return this.readStructEnd(),null;case Thrift.Type.MAP:for(ret=this.readMapBegin(),i=0;i<ret.size;i++)i>0&&this.rstack.length>this.rpos[this.rpos.length-1]+1&&this.rstack.pop(),this.skip(ret.ktype),this.skip(ret.vtype);return this.readMapEnd(),null;case Thrift.Type.SET:for(ret=this.readSetBegin(),i=0;i<ret.size;i++)this.skip(ret.etype);return this.readSetEnd(),null;case Thrift.Type.LIST:for(ret=this.readListBegin(),i=0;i<ret.size;i++)this.skip(ret.etype);return this.readListEnd(),null}}},Thrift.MultiplexProtocol=function(srvName,trans,strictRead,strictWrite){Thrift.Protocol.call(this,trans,strictRead,strictWrite),this.serviceName=srvName},Thrift.inherits(Thrift.MultiplexProtocol,Thrift.Protocol,"multiplexProtocol"),Thrift.MultiplexProtocol.prototype.writeMessageBegin=function(name,type,seqid){type===Thrift.MessageType.CALL||type===Thrift.MessageType.ONEWAY?Thrift.Protocol.prototype.writeMessageBegin.call(this,this.serviceName+":"+name,type,seqid):Thrift.Protocol.prototype.writeMessageBegin.call(this,name,type,seqid)},Thrift.Multiplexer=function(){this.seqid=0},Thrift.Multiplexer.prototype.createClient=function(serviceName,SCl,transport){SCl.Client&&(SCl=SCl.Client);var self=this;SCl.prototype.new_seqid=function(){return self.seqid+=1,self.seqid};var client=new SCl(new Thrift.MultiplexProtocol(serviceName,transport));return client},Thrift.TXHRTransport.prototype.flush=function(async,callback){var self=this;if(async&&!callback||void 0===this.url||""===this.url)return this.send_buf;var xreq=this.getXmlHttpRequestObject();if(xreq.overrideMimeType&&xreq.overrideMimeType("application/json"),callback&&(xreq.onreadystatechange=function(){if(4==this.readyState){var err=200==this.status?!1:!0;self.setRecvBuffer(err?"{{invalid":this.responseText),callback()}}),xreq.open("POST",this.url,!!async),xreq.send(this.send_buf),!async||!callback){if(4!=xreq.readyState)throw"encountered an unknown ajax ready state: "+xreq.readyState;if(200!=xreq.status)throw"encountered a unknown request status: "+xreq.status;this.recv_buf=xreq.responseText,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0}},module.exports.crouton_thrift=crouton_thrift,module.exports.Thrift=Thrift}()},{}],3:[function(require,module){module.exports=function(cr){var attrs={};attrs.navigator_available=navigator?"true":"false",navigator&&(attrs.navigator_app_code_name=navigator.appCodeName,attrs.navigator_app_name=navigator.appName,attrs.navigator_app_version=navigator.appVersion,attrs.navigator_do_not_track=navigator.doNotTrack,attrs.navigator_language=navigator.language,attrs.navigator_languages=navigator.languages,attrs.navigator_platform=navigator.platform,attrs.navigator_product=navigator.product,attrs.navigator_product_sub=navigator.productSub,attrs.navigator_user_agent=navigator.userAgent,attrs.navigator_vendor=navigator.vendor,attrs.navigator_vendor_sub=navigator.vendorSub),attrs.screen_available=screen?"true":"false",screen&&(attrs.screen_width=screen.width,attrs.screen_height=screen.height),attrs.window_available=window?"true":"false",window&&(attrs.window_inner_width=window.innerWidth,attrs.window_inner_height=window.innerHeight),attrs.document_available=document?"true":"false",document&&(attrs.document_domain=document.domain,attrs.document_uri=document.documentURI,attrs.document_referrer=document.referrer,attrs.document_doctype=document.doctype);var memoryAvailable=window&&window.performance&&window.performance.memory;if(attrs.performance_memory_available=memoryAvailable?"true":"false",memoryAvailable){var mem=performance.memory;attrs.performance_memory_js_heap_size_limit=mem.jsHeapSizeLimit,attrs.performance_memory_total_js_heap_size=mem.totalJSHeapSize,attrs.performance_memory_used_js_heap_size=mem.usedJSHeapSize}cr.attributes(attrs)}},{}],4:[function(require,module){function skipInstrumentation(cr){var status=cr.status();return!status.enabled||status.flushActive}function getResponseHeaders(xhr){var raw=xhr.getAllResponseHeaders();return raw.replace(/\r/g,"").replace(/^\s+/,"").replace(/\s+$/,"").split(/\n/)}module.exports=function(cr){if(window.XMLHttpRequest){var proxied={open:XMLHttpRequest.prototype.open,send:XMLHttpRequest.prototype.send};XMLHttpRequest.prototype.open=function(method,url){if(skipInstrumentation(cr))return proxied.open.apply(this,arguments);this.__cr_url=url,this.__cr_span=cr.span("XMLHttpRequest:"+url),this.__cr_span.event("XMLHttpRequest.open",{arguments:Array.prototype.slice.call(arguments)}),this.addEventListener("readystatechange",function(){if(4==this.readyState){var payload={url:url,method:method,headers:getResponseHeaders(this),status:this.status,statusText:this.statusText,responseType:this.responseType};if(this.responseText)try{payload.responseJSON=JSON.parse(this.responseText)}catch(e){payload.responseText=this.responseText}else payload.response=this.response;200!=this.status&&this.__cr_span.error("HTTP status error",this.status),this.__cr_span.event("XMLHttpRequest.readystate.done",payload),this.__cr_span.end()}else 2==this.readyState&&this.__cr_span.event("XMLHttpRequest.readystate.headers_received",{headers:getResponseHeaders(this)})});var result=proxied.open.apply(this,arguments);return result},XMLHttpRequest.prototype.send=function(){if(skipInstrumentation(cr))return proxied.send.apply(this,arguments);var data=Array.prototype.slice.call(arguments);if(1==data.length)try{data=JSON.parse(data[0])}catch(e){}return this.__cr_span.event("XMLHttpRequest.send",{url:this.__cr_url,data:data}),proxied.send.apply(this,arguments)}}}},{}],5:[function(require,module){module.exports=function(cr){if(!document)return void cr.event("cruntime.init.no_document_object","No document object available to cruntime");if(!window)return void cr.event("cruntime.init.no_window_object","No window object available to cruntime");var spanPageView=cr.span("cruntime.page_view");spanPageView.event("cruntime.page_view",{url:document.URL}),document.addEventListener("DOMContentLoaded",function(){cr.event("cruntime.dom_events.DOMContentLoaded")}),document.addEventListener("readystatechange",function(){cr.event("cruntime.dom_events.readystatechange",{ready_state:document.readyState})}),document.addEventListener("click",function(evt){var payload={clientX:evt.clientX,clientY:evt.clientY};if(evt.target){payload.target_id=evt.target.id,payload.class_name=evt.target.className,payload.tag_name=evt.target.tagName;for(var path=[payload.tag_name],elem=evt.target.parentNode;elem;)elem.tagName&&path.push(elem.tagName),elem=elem.parentNode;payload.path=path.reverse()}cr.event("cruntime.dom_events.click",payload)}),window.addEventListener("beforeunload",function(){cr.event("cruntime.dom_events.beforeunload"),spanPageView.end(),performance&&performance.timing&&(cr.event("cruntime.performance.timing",performance.timing),cr.spanManual("cruntime.performance.page_response",1e3*performance.timing.navigationStart,1e3*performance.timing.responseEnd),cr.spanManual("cruntime.performance.page_load",1e3*performance.timing.navigationStart,1e3*performance.timing.domComplete)),cr.flush(!0)}),window.addEventListener("unload",function(){cr.event("cruntime.dom_events.unload")})}},{}],6:[function(require,module){var lib={};lib.isNode=!1,lib.console=console,lib.nowMicros=function(){if(performance&&performance.now&&performance.timing&&performance.timing.navigationStart){var start=performance.timing.navigationStart;return function(){return 1e3*(start+performance.now())}}return function(){return 1e3*Date.now()}}(),lib.generateGUID=function(){return Math.floor(9007199254740992*Math.random()).toString(10)},lib.logger={info:function(args){console.log.apply(console,args)},warn:function(args){console.warn.apply(console,args)},error:function(args){console.error.apply(console,args)},fatal:function(args){console.error.apply(console,args)}},lib.abort=function(){throw new Error("Fatal exception")},lib.stackTrace=function(){var stack=(new Error).stack;if("string"==typeof stack){stack=stack.split("\n").slice(3);for(var i=0;i<stack.length;i++)stack[i]=stack[i].replace(/^\s*at\s+/,"");
return stack}return void 0};var proxyFilename="<browser>";lib.setSourceUrl=function(url){if("string"==typeof url){var parts=url.split("/");proxyFilename=parts[parts.length-1]}},lib.defaultLogFilename=function(){return proxyFilename},module.exports=lib},{}],7:[function(){"function"!=typeof Object.create&&(Object.create=function(){var Temp=function(){};return function(prototype){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof prototype)throw TypeError("Argument must be an object");Temp.prototype=prototype;var result=new Temp;return Temp.prototype=null,result}}())},{}],8:[function(require,module){var thrift_wrapper=require("./src/generated/crouton_thrift_all.js"),common=require("node/packages/rl-cruntime-common"),packageObject=require("./package.json"),platform=require("./src/platform_browser.js"),state=(require("./src/polyfill.js"),common.createState({thriftTypes:thrift_wrapper.crouton_thrift,thriftLibrary:thrift_wrapper.Thrift,platform:platform,groupName:"cruntime_browser",postInitialize:function(cr){require("./src/initialize_runtime_attributes.js")(cr),require("./src/instrument_ajax.js")(cr),require("./src/instrument_document.js")(cr)}})),api=common.api(state),options={paused:!1,cruntime_platform:packageObject.name,cruntime_version:packageObject.version},scripts=document.getElementsByTagName("SCRIPT");if(scripts.length>0){var script=scripts[scripts.length-1],dataPaused=script.dataset.paused;switch(dataPaused){case"true":case 1:options.paused=!0}var accessToken=script.dataset.access_token;"string"==typeof accessToken&&accessToken.length>0&&(options.access_token=accessToken);var groupName=script.dataset.group_name;"string"==typeof groupName&&groupName.length>0&&(options.group_name=groupName);var globalName=script.dataset.global_name;"string"==typeof globalName&&globalName.length>0&&(window[globalName]=api);var serviceHost=script.dataset.service_host;"string"==typeof serviceHost&&serviceHost.length>0&&(options.service_host=serviceHost);var servicePort=script.dataset.service_port;servicePort&&(options.service_port=parseInt(servicePort)),api.attributes({cruntime_source_url:script.src}),platform.setSourceUrl(script.src.replace(/\?.*$/,""))}api.initialize(options),module.exports=api},{"./package.json":1,"./src/generated/crouton_thrift_all.js":2,"./src/initialize_runtime_attributes.js":3,"./src/instrument_ajax.js":4,"./src/instrument_document.js":5,"./src/platform_browser.js":6,"./src/polyfill.js":7,"node/packages/rl-cruntime-common":9}],9:[function(require,module){var State=require("./src/state.js"),lib={};lib.createState=function(opts){if(!opts.thriftTypes)throw new Error("opts.thriftTypes required");if(!opts.thriftLibrary)throw new Error("opts.thriftLibrary required");if(!opts.platform)throw new Error("opt.platform required");if("function"!=typeof opts.platform.nowMicros)throw new Error("nowMicros is a required platform function");if("function"!=typeof opts.platform.generateGUID)throw new Error("generateGUID is a required platform function");if("object"!=typeof opts.platform.console)throw new Error("console is not a valid platform object");if("function"!=typeof opts.platform.console.log)throw new Error("console.log is not a valid platform function");if("function"!=typeof opts.platform.console.warn)throw new Error("console.warn is not a valid platform function");if("function"!=typeof opts.platform.console.error)throw new Error("console.error is not a valid platform function");if("string"!=typeof opts.groupName)throw new Error("opts.groupName is not a valid string");return new State(opts.thriftTypes,opts.thriftLibrary,opts.platform,opts.groupName,opts.postInitialize)},lib.api=require("./src/api.js"),module.exports=lib},{"./src/api.js":10,"./src/state.js":13}],10:[function(require,module){var imp=null,lib={};lib.initialize=function(){return imp.initialize.apply(imp,arguments)},lib.options=function(){return imp.options.apply(imp,arguments)},lib.attributes=function(){return imp.runtimeAttributes.apply(imp,arguments)},lib.guid=function(){return imp.runtimeGUID()},lib.status=function(){return imp.getStatus()},lib.log=function(){return imp.logArgumentsInfo(arguments)},lib.info=function(){return imp.logArgumentsInfo(arguments)},lib.warn=function(){return imp.logArgumentsWarn(arguments)},lib.error=function(){return imp.logArgumentsError(arguments)},lib.fatal=function(){return imp.logArgumentsFatal(arguments)},lib.logf=function(){return imp.logFormattedInfo(arguments)},lib.infof=function(){return imp.logFormattedInfo(arguments)},lib.warnf=function(){return imp.logFormattedWarn(arguments)},lib.errorf=function(){return imp.logFormattedError(arguments)},lib.fatalf=function(){return imp.logFormattedFatal(arguments)},lib.exception=function(e){return imp.logException(e)},lib.event=function(name,payload){return imp.logEvent.call(imp,name,payload)},lib.eventWrap=function(){return imp.eventWrap.apply(imp,arguments)},lib.span=function(){return imp.span.apply(imp,arguments)},lib.spanWrap=function(){return imp.spanWrap.apply(imp,arguments)},lib.spanSection=function(){return imp.spanSection.apply(imp,arguments)},lib.spanManual=function(){return imp.spanManual.apply(imp,arguments)},lib.pause=function(){throw new Error("NOT_YET_IMPLEMENTED")},lib.resume=function(){throw new Error("NOT_YET_IMPLEMENTED")},lib.flush=function(synchronous){return imp.flushBuffer(synchronous)},lib.discard=function(){imp.discardBuffers()},lib.stats=function(){return imp.reportBufferStats()},module.exports=function(implObject){return imp=implObject,imp.api=lib,lib.__imp=imp,lib}},{}],11:[function(require,module){function ObjectPool(opts){var reserveCount=opts.reserve||32;this._ctor=opts.constructor,this._reset=opts.object_reset,this._pop_front=opts.pop_front||!1,this.allocationCount=0,this.acquireCount=0,this.releaseCount=0,this.freeList=new Array(reserveCount);for(var i=0;reserveCount>i;i++)this.freeList[i]=this.newObject()}ObjectPool.prototype.newObject=function(){return this.allocationCount++,new this._ctor},ObjectPool.prototype.acquire=function(args){this.acquireCount++;var obj;return obj=this.freeList.length?this.freeList.pop():this.newObject(),this._reset(obj,args),obj},ObjectPool.prototype.release=function(obj){void 0!==obj&&null!==obj&&(this.releaseCount++,this._reset(obj),this.freeList.push(obj))},ObjectPool.prototype.reset=function(){this.allocationCount=0,this.acquireCount=0,this.releaseCount=0,this.freeList=[]},module.exports=ObjectPool},{}],12:[function(require,module){function SpanHandle(state,record){this._record=record,this._state=state}function logUserError(state,text,args){state.rawLogRecord({level:"E",filename:"<span_handle>",message:text,stack_frames:state.stackTrace(),payload:{arguments:Array.prototype.slice.call(args)}})}function mergeTraceIds(parentArray,toMerge){for(var map={},i=0;i<parentArray.length;i++){var pair=parentArray[i];map[pair.TraceKey]=pair.Value}if(toMerge)for(var key in toMerge)map[key]=toMerge[key];return map}function NoOpHandle(){}var kSpanHandlesPoolInitialSize=32,ObjectPool=require("./object_pool.js"),pool={spanHandles:new ObjectPool({constructor:SpanHandle,initial_size:kSpanHandlesPoolInitialSize,object_reset:function(){this._record=null,this._state=null}})};SpanHandle.prototype.guid=function(){return this._record?this._record.span_guid:(logUserError(this._state,"Invalid span handle",arguments),0)},SpanHandle.prototype.end=function(){return this._record?void(null===this._record.youngest_micros&&(this._record.youngest_micros=this._state.nowMicros(),this._state.pushSpanRecord(this._record),this._record=null,pool.spanHandles.release(this))):void logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.endWrap=function(f){var self=this;return function(){self.end();var r;try{r=f.apply(this,arguments)}catch(e){throw self.exception(e),e}return r}},SpanHandle.prototype.joinIds=function(joinIds){this._record?this._state.mergeJoinIdMapIntoSpanRecord(this._record,joinIds):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.log=function(){this._record?this._state.logArgumentsInfo(arguments,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.info=SpanHandle.prototype.log,SpanHandle.prototype.warn=function(){this._record?this._state.logArgumentsWarn(arguments,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.error=function(){this._record?(this._record.error_text="error",this._state.logArgumentsError(arguments,this._record.span_guid)):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.fatal=function(){var guid;this._record?guid=this._record.span_guid:logUserError(this._state,"Invalid span handle",arguments),this._state.logArgumentsFatal(arguments,guid)},SpanHandle.prototype.logf=function(){this._record?this._state.logFormattedInfo(arguments,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.infof=SpanHandle.prototype.logf,SpanHandle.prototype.warnf=function(){this._record?this._state.logFormattedWarn(arguments,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.errorf=function(){this._record?this._state.logFormattedError(arguments,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.fatalf=function(){var guid;this._record&&(guid=this._record.span_guid,logUserError(this._state,"Invalid span handle",arguments)),this._state.logFormattedFatal(arguments,guid)},SpanHandle.prototype.exception=function(){var guid;this._record&&(guid=this._record.span_guid,logUserError(this._state,"Invalid span handle",arguments)),this._state.logException(arguments,guid)},SpanHandle.prototype.event=function(name,payload){this._record?this._state.logEvent(name,payload,this._record.span_guid):logUserError(this._state,"Invalid span handle",arguments)},SpanHandle.prototype.span=function(suffix,joinIdKeyValues){var inner;if(this._record){var joinIds=mergeTraceIds(this._record.join_ids,joinIdKeyValues);inner=this._state.rawSpanBegin(this._record.span_name+"."+suffix,joinIds)}else logUserError(this._state,"Invalid span handle",arguments),inner=this._state.rawSpanBegin(suffix,joinIdKeyValues);return this._state.createSpanHandle(inner)},SpanHandle.prototype.spanSection=function(suffix,joinIdKeyValues,f){2===arguments.length&&(f=joinIdKeyValues,joinIdKeyValues={});var joinIds=mergeTraceIds(this._record.join_ids,joinIdKeyValues);return this._state.spanSection(this._record.span_name+"."+suffix,joinIds,f)};for(var key in SpanHandle.prototype)NoOpHandle.prototype[key]=function(){};NoOpHandle.prototype.endWrap=function(f){return f},NoOpHandle.prototype.span=function(){return this},NoOpHandle.prototype.spanSection=function(suffix,joinIdKeyValues,f){return 2===arguments.length&&(f=joinIdKeyValues),f()};var lib={};lib.acquire=function(state,record){var obj=pool.spanHandles.acquire();return SpanHandle.call(obj,state,record),obj},module.exports=lib},{"./object_pool.js":11}],13:[function(require,module){function initializeGlobals(state,crouton_thrift_,Thrift_,platform_){if(null!==singleton)throw new Error("State is intended to be a singleton.");singleton=state,platform=platform_,crouton_thrift=crouton_thrift_,Thrift=Thrift_,pool.logRecords=new ObjectPool({constructor:crouton_thrift.LogRecord,initial_size:kLogRecordsPoolInitialSize,object_reset:function(obj,args){crouton_thrift.LogRecord.call(obj,args)}}),pool.spanRecords=new ObjectPool({constructor:crouton_thrift.SpanRecord,initial_size:kSpanRecordsPoolInitialSize,object_reset:function(obj,args){crouton_thrift.SpanRecord.call(obj,args)}}),pool.traceJoinIds=new ObjectPool({constructor:crouton_thrift.TraceJoinId,initial_size:kTraceJoinIdPoolInitialSize,object_reset:function(obj,args){crouton_thrift.TraceJoinId.call(obj,args)}})}function releaseSpanRecord(span){if(span.join_ids)for(var j=0;j<span.join_ids.length;j++)pool.traceJoinIds.release(span.join_ids[j]);pool.spanRecords.release(span)}function releaseArrays(logs,spans){for(var i=0;i<logs.length;i++)pool.logRecords.release(logs[i]);for(i=0;i<spans.length;i++)releaseSpanRecord(spans[i])}function State(thriftTypes,thriftLibrary,platform,groupName,postInitialize){initializeGlobals(this,thriftTypes,thriftLibrary,platform),this.api=null,this.serviceHost="localhost",this.servicePort=platform.isNode?1e4:9999,this.bufferMaxSpanRecords=kMaxSpanRecordsDefault,this.bufferMaxLogRecords=kMaxLogRecordsDefault,this.refreshIntervalMs=kRefreshIntervalMsDefault,this.runtime=new crouton_thrift.Runtime,this.runtime.guid=platform.generateGUID(),this.runtime.group_name=groupName,this.runtime.start_micros=platform.nowMicros(),this.client=null,this.auth=new crouton_thrift.Auth,this.refreshLoopActive=!1,this.flushActive=!1,this.flushErrorCount=0,this.hooks={postInitialize:postInitialize||function(){}},this.initialized=!1,this.enabled=!0,this.joinIds={},this.spans=[],this.logs=[],this.reusable={proxyReportRequest:new crouton_thrift.ProxyReportRequest,status:{}},this.invokeProxyReport=null,this.isNode=platform.isNode,this.nowMicros=function(){return platform.nowMicros()},this.generateGUID=function(){return platform.generateGUID()},this.logger=platform.logger,this.stackTrace=function(){return platform.stackTrace()},this.processAbort=function(){return platform.abort()},this.defaultLogFilename=function(){return platform.defaultLogFilename()}}var ObjectPool=require("./object_pool.js"),span_handle=require("./span_handle.js"),inspectify=require("node/packages/rl-inspectable-object"),kLogRecordsPoolInitialSize=128,kSpanRecordsPoolInitialSize=32,kTraceJoinIdPoolInitialSize=64,kMaxLogRecordsDefault=1024,kMaxSpanRecordsDefault=1024,kRefreshIntervalMsDefault=2500,singleton=null,crouton_thrift=null,Thrift=null,pool={logRecords:null,spanRecords:null,traceJoinIds:null},platform=null,originalConsole=console;State.prototype.initialize=function(opts){this.options(opts);var paused=opts?opts.paused:!1;this.auth.access_token&&!paused&&this.startFlushBufferLoop(),this.initialized||(this.initialized=!0,this.hooks.postInitialize(this.api))},State.prototype.options=function(opts){var self=this;if(opts){if("object"!=typeof opts)return void this.logArgumentsError(["options called with a non-object argument"]);if("undefined"!=typeof opts.enable&&this.setEnabled(opts.enable),"string"==typeof opts.access_token&&(this.auth.access_token=opts.access_token),"string"==typeof opts.service_host&&(this.serviceHost=opts.service_host),opts.service_port){var port=parseInt(opts.service_port);this.servicePort=port}if("string"==typeof opts.group_name&&(this.runtime.group_name=opts.group_name),void 0!==opts.join_ids)for(var key in opts.join_ids)this.joinIds[key]=opts.join_ids[key];if("number"==typeof opts.max_log_records?this.bufferMaxLogRecords=Math.max(opts.max_log_records,1):null===opts.max_log_records&&(this.bufferMaxLogRecords=kMaxLogRecordsDefault),"number"==typeof opts.max_span_records?this.bufferMaxSpanRecords=Math.max(opts.max_span_records,1):null===opts.max_span_records&&(this.bufferMaxSpanRecords=kMaxSpanRecordsDefault),void 0!==opts.override_console&&(opts.override_console===!0?(console.log=function(){self.logArgumentsInfo.call(self,arguments)},console.warn=function(){self.logArgumentsWarn.call(self,arguments)},console.error=function(){self.logArgumentsError.call(self,arguments)}):(console.log=originalConsole.log,console.warn=originalConsole.warn,console.error=originalConsole.error)),"number"==typeof opts.refresh_interval_millis?this.refreshIntervalMs=Math.max(0,opts.refresh_interval_millis):null===opts.refresh_interval_millis&&(this.refreshIntervalMs=kRefreshIntervalMsDefault),"string"==typeof opts.cruntime_platform&&this.replaceOrAddRuntimeKeyValue("cruntime_platform",opts.cruntime_platform),"string"==typeof opts.cruntime_version&&this.replaceOrAddRuntimeKeyValue("cruntime_version",opts.cruntime_version),opts.reset_object_pools&&this.resetObjectPools(),void 0!==opts.override_abort&&(this.processAbort="function"==typeof opts.override_abort?opts.override_abort:function(){return platform.abort()}),void 0!==opts.override_logger){var f=opts.override_logger;if("function"==typeof f){var g=function(args){return f(args.join(" "))};this.logger={info:g,warn:g,error:g,fatal:g}}else this.logger=platform.logger}void 0!==opts.override_report_rpc&&(this.invokeProxyReport="function"==typeof opts.override_report_rpc?opts.override_report_rpc:this.client?this.createAsyncRPCAdapter(this.client.ProxyReport,crouton_thrift.ProxyReportResponse):null)}},State.prototype.replaceOrAddRuntimeKeyValue=function(key,value){var keyValue=new crouton_thrift.KeyValue;if(keyValue.Key=key,"string"!=typeof value)try{value=JSON.stringify(value)}catch(e){value=toString.call(value)}keyValue.Value=value,this.runtime.attrs||(this.runtime.attrs=[]);for(var i=0;i<this.runtime.attrs.length;i++){var attr=this.runtime.attrs[i];if(attr.Key==key)break}this.runtime.attrs[i]=keyValue},State.prototype.runtimeAttributes=function(attrs){if("object"==typeof attrs)for(var key in attrs)this.replaceOrAddRuntimeKeyValue(key,attrs[key])},State.prototype.runtimeGUID=function(){return this.runtime.guid},State.prototype.setEnabled=function(enable){enable=!(!enable||("false"===enable?!0:!1)),this.enabled!==enable&&(this.enabled=enable,enable||this.discardBuffers())},State.prototype.getStatus=function(){var status=this.reusable.status;return status.enabled=this.enabled,status.flushActive=this.flushActive,status},State.prototype.flushBuffer=function(synchronous,done){var self=this;if(done=done||function(){},!this.enabled)return done();if(this.flushActive)return done();if(0===this.logs.length&&0===this.spans.length)return done();synchronous=synchronous||!1;var req=this.reusable.proxyReportRequest;req.runtime=this.runtime,req.timestamp_micros=platform.nowMicros(),req.span_records=this.spans,req.log_records=this.logs,this.flushActive=!0;var logs=this.logs,spans=this.spans;try{this.invokeProxyReport(synchronous,req,function(err,res){self.flushActive=!1,err&&originalConsole.error("RPC error:",err),res&&res.kill_cruntime&&self.options({enable:!1}),releaseArrays(logs,spans),done(err)})}catch(e){this.flushActive&&(releaseArrays(logs,spans),this.flushActive=!1),done(e)}this.logs=[],this.spans=[]},State.prototype.startFlushBufferLoop=function(){if(!this.refreshLoopActive){var self=this;if(this.isNode){var options={transport:Thrift.TBufferedTransport,protocol:Thrift.TBinaryProtocol,path:"/",https:!1},connection=Thrift.createHttpConnection(this.serviceHost,this.servicePort,options);this.client=Thrift.createHttpClient(crouton_thrift.CroutonServiceClient,connection),connection.on("error",function(err){originalConsole.error("cruntime thrift error:",err)})}else{var serviceUrl="https://"+this.serviceHost+":"+this.servicePort+"/",transport=new Thrift.Transport(serviceUrl),protocol=new Thrift.Protocol(transport);this.client=new crouton_thrift.CroutonServiceClient(protocol)}this.invokeProxyReport||(this.invokeProxyReport=this.createAsyncRPCAdapter(this.client.ProxyReport,crouton_thrift.ProxyReportResponse)),this.refreshLoopActive=!0,function loop(){self.flushBuffer(!1,function(err){err?self.flushErrorCount++:self.flushErrorCount=0;var backOff=Math.pow(2,Math.max(0,Math.min(8,self.flushErrorCount-2)));setTimeout(loop,backOff*self.refreshIntervalMs)})}()}},State.prototype.createAsyncRPCAdapter=function(rpc,respType){var self=this;return this.isNode?function(synchronous,req,callback){rpc.call(self.client,self.auth,req,callback)}:function(synchronous,req,callback){if(synchronous){var res=this.client.ProxyReport(null,req);return res instanceof crouton_thrift.ProxyReportResponse?callback(null,res):callback(res,null)}rpc.call(self.client,self.auth,req,function(res){res instanceof respType?callback(null,res):callback(res,null)})}},State.prototype.discardBuffers=function(){releaseArrays(this.logs,this.spans),this.logs=[],this.spans=[]},State.prototype.resetObjectPools=function(){pool.logRecords.reset(),pool.spanRecords.reset(),pool.traceJoinIds.reset()},State.prototype.rawLogRecord=function(fields){if(this.enabled){null!==fields.payload&&void 0!==fields.payload&&(fields.payload_json=JSON.stringify(inspectify(fields.payload)),fields.payload=null);var record=pool.logRecords.acquire(fields);if(record.runtime_guid=this.runtime.guid,record.timestamp_micros=platform.nowMicros(),this.logs.length>=this.bufferMaxLogRecords){var index=Math.floor(this.logs.length*Math.random());pool.logRecords.release(this.logs[index]),this.logs[index]=record}else this.logs.push(record)}},State.prototype.logArgumentsWithSpanGUID=function(spanGUID,level,args){this.enabled&&this.rawLogRecord({level:level,filename:this.defaultLogFilename(),message:args.join(" "),payload:{arguments:Array.prototype.slice.call(args)},span_guid:spanGUID})},State.prototype.logArgumentsInfo=function(args,spanGUID){this.enabled&&(args=Array.prototype.slice.call(args),this.logArgumentsWithSpanGUID(spanGUID,"I",args),this.logger.info(args))},State.prototype.logArgumentsWarn=function(args,spanGUID){this.enabled&&(args=Array.prototype.slice.call(args),this.logArgumentsWithSpanGUID(spanGUID,"W",args),this.logger.warn(args))},State.prototype.logArgumentsError=function(args,spanGUID){this.enabled&&(args=Array.prototype.slice.call(args),this.logArgumentsWithSpanGUID(spanGUID,"E",args),this.logger.error(args))},State.prototype.logArgumentsFatal=function(args,spanGUID){this.enabled&&(args=Array.prototype.slice.call(args),this.logArgumentsWithSpanGUID(spanGUID,"F",args),this.logger.fatal(args),this.processAbort())},State.prototype.logFormattedInfo=function(){if(this.enabled)throw new Error("NOT_YET_IMPLEMENTED")},State.prototype.logFormattedWarn=function(){if(this.enabled)throw new Error("NOT_YET_IMPLEMENTED")},State.prototype.logFormattedError=function(){if(this.enabled)throw new Error("NOT_YET_IMPLEMENTED")},State.prototype.logFormattedFatal=function(){if(this.enabled)throw new Error("NOT_YET_IMPLEMENTED")},State.prototype.logException=function(e,spanGUID){if(this.enabled){var lineNumber,filename,stackFrames=[];if("string"==typeof e.stack&&(stackFrames=e.stack.split("\n"),stackFrames.length>=2)){var m,top=stackFrames[1];if(top.match(/^\s+at\s/)&&(m=top.match(/\((.+):([0-9]+):([0-9]+)\)$/))){filename=m[1];try{lineNumber=parseInt(m[2])}catch(ignored){}}}var exceptionType="Exception";e instanceof EvalError?exceptionType="EvalError":e instanceof RangeError?exceptionType="RangeError":e instanceof ReferenceError?exceptionType="ReferenceError":e instanceof SyntaxError?exceptionType="SyntaxError":e instanceof TypeError?exceptionType="TypeError":e instanceof URIError?exceptionType="URIError":e instanceof Error&&(exceptionType="Error"),this.rawLogRecord({span_guid:spanGUID,message:e.toString(),level:"E",filename:filename,line_number:lineNumber,payload:{exceptionType:exceptionType},stack_frames:stackFrames})}},State.prototype.logEvent=function(name,payload,spanGUID){this.enabled&&this.rawLogRecord({stable_name:name,filename:this.defaultLogFilename(),payload:payload,span_guid:spanGUID})},State.prototype.eventWrap=function(name,f){var self=this;return function(){return this.enabled&&self.rawLogRecord({stable_name:name,filename:self.defaultLogFilename(),payload:{arguments:arguments,stack_frames:platform.stackTrace()}}),f.apply(this,arguments)}},State.prototype.rawSpanBegin=function(name,joinIdKeyValues){if(!this.enabled)return null;var record=pool.spanRecords.acquire();return record.span_guid=platform.generateGUID(),record.runtime_guid=this.runtime.guid,record.span_name=name,record.oldest_micros=platform.nowMicros(),record.youngest_micros=null,record.join_ids=[],this.mergeJoinIdMapIntoSpanRecord(record,joinIdKeyValues),record},State.prototype.mergeJoinIdMapIntoSpanRecord=function(spanRecord,joinIdMap){if(joinIdMap)for(var key in joinIdMap){var joinId=pool.traceJoinIds.acquire();joinId.TraceKey=key,joinId.Value=joinIdMap[key],spanRecord.join_ids.push(joinId)}},State.prototype.createSpanHandle=function(spanRecord){return span_handle.acquire(this,spanRecord)},State.prototype.span=function(name,joinIdKeyValues){var record=this.rawSpanBegin(name,joinIdKeyValues);return this.createSpanHandle(record)},State.prototype.spanWrap=function(name,joinIdKeyValues,f){var self=this;return 2==arguments.length&&(f=joinIdKeyValues,joinIdKeyValues={}),function(){var r,handle=self.span(name,joinIdKeyValues);try{r=f.apply(this,arguments)}catch(e){throw self.logException(e),e}finally{handle.end()}return r}},State.prototype.spanSection=function(name,joinIdKeyValues,f){2===arguments.length&&(f=joinIdKeyValues,joinIdKeyValues={});var r,handle=this.span(name,joinIdKeyValues);try{r=f()}catch(e){throw this.logException(e),e}finally{handle.end()}return r},State.prototype.spanManual=function(name,oldestMicros,youngestMicros){if(this.enabled){var record=this.rawSpanBegin(name);record.oldest_micros=oldestMicros,record.youngest_micros=youngestMicros,this.pushSpanRecord(record)}},State.prototype.pushSpanRecord=function(record){if(this.mergeJoinIdMapIntoSpanRecord(record,this.joinIds),this.spans.length>=this.bufferMaxSpanRecords){var index=Math.floor(this.spans.length*Math.random());releaseSpanRecord(this.spans[index]),this.spans[index]=record}else this.spans.push(record)},State.prototype.reportBufferStats=function(){return{service_host:this.serviceHost,service_port:this.servicePort,queued_logs:this.logs.length,queued_spans:this.spans.length,max_log_records:this.bufferMaxLogRecords,max_span_records:this.bufferMaxSpanRecords,log_records_allocated:pool.logRecords.allocationCount,log_records_acquired:pool.logRecords.acquireCount,log_records_released:pool.logRecords.releaseCount,log_records_active:pool.logRecords.allocationCount-pool.logRecords.freeList.length,span_records_allocated:pool.spanRecords.allocationCount,span_records_acquired:pool.spanRecords.acquireCount,span_records_released:pool.spanRecords.releaseCount,span_records_active:pool.spanRecords.allocationCount-pool.spanRecords.freeList.length,join_ids_allocated:pool.traceJoinIds.allocationCount,join_ids_acquired:pool.traceJoinIds.acquireCount,join_ids_released:pool.traceJoinIds.releaseCount,join_ids_active:pool.traceJoinIds.allocationCount-pool.traceJoinIds.freeList.length}},module.exports=State},{"./object_pool.js":11,"./span_handle.js":12,"node/packages/rl-inspectable-object":14}],14:[function(require,module){module.exports=require("./src/process.js")},{"./src/process.js":15}],15:[function(require,module){function isRegExp(obj){return"[object RegExp]"===toString.call(obj)}function Processor(opts){opts=opts||{},this.valueCount=0,this.seen=[],this.limitValueCount=opts.limit_value_count||64,this.limitStringLength=opts.limit_string_length||512,this.limitArrayLength=opts.limit_array_length||24,this.arrayPeekLength=opts.array_peek_length||5}var isArray=function(){return Array.isArray?function(obj){return Array.isArray(obj)}:function(obj){return"[object Array]"===toString.call(obj)}}();Processor.prototype.process=function(value,opts){return Processor.call(this,opts),this.processFastPath(value)?value:this.processSlowPath(value)},Processor.prototype.processFastPath=function(value){function isSimple(value,count){var type=typeof value;if("string"===type)return value.length>self.limitStringLength?exceedsLimit:count+1;if("number"===type)return 1/0===value?exceedsLimit:value===-1/0?exceedsLimit:value!==value?exceedsLimit:count+1;if("function"===type)return exceedsLimit;if("object"!==type)return count+1;if(isArray(value)){if(count+value.length>limit)return exceedsLimit;for(var i=0;i<value.length;i++)if(count=isSimple(count,value[i],limit),count+props>limit)return exceedsLimit;return count}var props=0;for(var key in value)props++;if(count+props>limit)return exceedsLimit;for(var key in value)if(count=isSimple(count,value[i],limit),count+props>limit)return exceedsLimit;return count}var self=this,limit=this.limitValueCount,exceedsLimit=limit+1;if(isSimple(value,0)>limit)return!1;try{JSON.stringify(value)}catch(e){return!1}return!0},Processor.prototype.processSlowPath=function(value){return this.postProcessValue(this.processValue(value))},Processor.prototype.truncateString=function(value){var limit=this.limitStringLength;return value.length>limit&&(value=value.slice(0,limit-1)+""),value},Processor.prototype.postProcessValue=function(value){function enqueue(key,value,isObject){self.valueCount<valueLimit?(parents.push(value),indices.push(key),self.valueCount++):isObject&&delete value[key],self.valueCount===valueLimit&&(parents.push(value),indices.push(""),value[""]="<truncated>",self.valueCount++)}var valueLimit=this.limitValueCount,self=this,root={value:value},indices=["value"],parents=[root];for(this.valueCount++;parents.length;){var parent=parents.shift(),index=indices.shift(),value=parent[index];if("function"==typeof value&&(parent[index]=value=value()),"object"==typeof value)if(isArray(value))if(this.valueCount+value.length>=valueLimit)parent[index]=value=["<truncated>"],parents.push(value),indices.push(0);else for(var i=0;i<value.length;i++)enqueue(i,value,!0);else for(var key in value)enqueue(key,value,!1)}return root.value},Processor.prototype.processValue=function(value){var self=this;switch(typeof value){case"undefined":return value;case"boolean":return value;case"string":return this.truncateString(value);case"number":return 1/0===value?"<infinity>":value===-1/0?"<-infinity>":value!==value?"<NaN>":value;case"object":return null===value?value:isRegExp(value)?(value=this.truncateString(value.toString()),"<regexp: "+value+">"):-1!==this.seen.indexOf(value)?"<circular>":(this.seen.push(value),isArray(value)?value.length>this.limitArrayLength?function(){return{$type:"<truncated_array>",length:value.length,head:self.processValue(value.slice(0,self.arrayPeekLength)),tail:self.processValue(value.slice(value.length-self.arrayPeekLength))}}:function(){for(var a=new Array(value.length),i=0;i<value.length;i++)a[i]=self.processValue(value[i]);return a}:function(){var obj={};for(var key in value)obj[key]=self.processValue(value[key]);return obj});case"function":return"<function>";case"symbol":return"<symbol>"}};var gProcessor=new Processor;module.exports=function(value,opts){return gProcessor.process(value,opts)}},{}]},{},[8])(8)})}();